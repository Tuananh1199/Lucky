<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L√¨ X√¨ T·∫øt B√≠nh Ng·ªç 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;700&family=Pacifico&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --tet-red: #d32f2f;
            --tet-gold: #ffeb3b;
            --dark-red: #8e0000;
            --gold-metallic: linear-gradient(135deg, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Lexend', sans-serif;
            background: var(--dark-red);
            color: var(--tet-gold);
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Hi·ªáu ·ª©ng Ti·ªÅn r∆°i (Coins Rain) */
        .coin {
            position: fixed;
            top: -50px;
            font-size: 20px;
            z-index: 0;
            user-select: none;
            pointer-events: none;
            animation: fall linear forwards;
        }

        @keyframes fall {
            to { transform: translateY(110vh) rotate(360deg); }
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
            padding: 15px;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 25px;
            background: rgba(211, 47, 47, 0.9);
            border-radius: 20px;
            border: 3px solid var(--tet-gold);
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .header h1 {
            font-family: 'Pacifico', cursive;
            font-size: 2.2em;
            color: var(--tet-gold);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .horse-icon {
            font-size: 4em;
            display: inline-block;
            cursor: pointer;
            transition: transform 0.2s;
            user-select: none;
        }

        .horse-icon:active { transform: scale(0.9); }

        /* Controls */
        .btn-group {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .category-btn {
            padding: 12px 20px;
            border: 2px solid var(--tet-gold);
            border-radius: 12px;
            background: var(--tet-red);
            color: var(--tet-gold);
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        .category-btn:hover { background: var(--tet-gold); color: var(--tet-red); }

        /* Grid L√¨ X√¨ */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        @media (max-width: 600px) {
            .cards-grid { grid-template-columns: repeat(4, 1fr); gap: 8px; }
            .header h1 { font-size: 1.5em; }
        }

        .card {
            aspect-ratio: 3/4;
            perspective: 1000px;
            cursor: pointer;
        }

        .card-inner {
            position: relative;
            width: 100%; height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .card.flipped .card-inner { transform: rotateY(180deg); }

        .card-front, .card-back {
            position: absolute;
            width: 100%; height: 100%;
            backface-visibility: hidden;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--tet-gold);
        }

        .card-front {
            background: var(--tet-red);
            font-size: 2em;
        }

        .card-back {
            background: var(--tet-gold);
            color: var(--tet-red);
            transform: rotateY(180deg);
            font-weight: bold;
            font-size: 0.7em;
            text-align: center;
        }

        /* Modal Settings */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            z-index: 2000;
            padding: 20px;
            overflow-y: auto;
        }

        .modal-content {
            background: white;
            color: #333;
            padding: 20px;
            border-radius: 15px;
            max-width: 500px;
            margin: auto;
        }

        .input-group { margin-bottom: 10px; }
        .input-group label { display: block; font-size: 0.8em; font-weight: bold; }
        .input-group input { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 5px; }

        /* Stats */
        .stats {
            margin-top: 20px;
            text-align: center;
            font-size: 0.9em;
            background: rgba(0,0,0,0.3);
            padding: 10px;
            border-radius: 10px;
        }

        .result-popup {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: var(--tet-red);
            border: 5px solid var(--tet-gold);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            z-index: 3000;
            display: none;
            animation: zoomIn 0.3s forwards;
        }

        @keyframes zoomIn { from {transform: translate(-50%, -50%) scale(0.5); opacity: 0;} }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <div class="horse-icon" id="horseBtn">üê¥</div>
        <h1>L√¨ X√¨ T·∫øt B√≠nh Ng·ªç</h1>
        <p style="font-size: 0.9em; opacity: 0.9;">Ch√∫c M·ª´ng NƒÉm M·ªõi - V·∫°n S·ª± Nh∆∞ √ù</p>
    </div>

    <div class="btn-group">
        <button class="category-btn" onclick="initGame('takeLuck')">üßß L√¨ X√¨ L·∫•y May</button>
        <button class="category-btn" onclick="initGame('lucky')">‚ú® L√¨ X√¨ May M·∫Øn</button>
    </div>

    <div id="gameStatus" style="text-align: center; margin-bottom: 10px; font-weight: bold;"></div>

    <div class="cards-grid" id="grid"></div>

    <div class="stats">
        L∆∞·ª£t m·ªü: <span id="picks">0</span> | T·ªïng ti·ªÅn: <span id="total">0ƒë</span>
    </div>
</div>

<div class="result-popup" id="resultPopup">
    <h2 style="color: var(--tet-gold);">Ch√∫c M·ª´ng!</h2>
    <div id="winAmount" style="font-size: 2em; margin: 20px 0; font-weight: 900; color: white;"></div>
    <button class="category-btn" onclick="closePopup()">Nh·∫≠n l·ªôc</button>
</div>

<div class="modal" id="adminModal">
    <div class="modal-content">
        <h3>C√†i ƒë·∫∑t t·ª∑ l·ªá ·∫©n</h3>
        <div id="adminPassArea">
            <input type="password" id="adminPass" placeholder="M·∫≠t kh·∫©u..." style="width:100%; padding:10px; margin:10px 0;">
            <button class="category-btn" onclick="verifyPass()" style="width: 100%;">Truy c·∫≠p</button>
        </div>
        <div id="adminControls" style="display:none;">
            <p style="font-size: 11px; margin-bottom: 10px;">Thay ƒë·ªïi c√°c m·ªánh gi√° (c√°ch nhau b·ªüi d·∫•u ph·∫©y):</p>
            <div class="input-group">
                <label>M·ªánh gi√° L·∫•y May:</label>
                <input type="text" id="customTakeLuck" value="10000, 20000, 50000, 100000">
            </div>
            <div class="input-group">
                <label>M·ªánh gi√° May M·∫Øn:</label>
                <input type="text" id="customLucky" value="88888, 168168, 200000, 333333, 555555">
            </div>
            <button class="category-btn" onclick="saveSettings()" style="width: 100%;">L∆∞u & ƒê√≥ng</button>
        </div>
    </div>
</div>

<script>
    let globalPicks = 0;
    let globalTotal = 0;
    let clickCount = 0;
    let clickTimer;

    // Config m·∫∑c ƒë·ªãnh
    let config = {
        takeLuck: [10000, 20000, 50000, 68000, 79000, 88000, 100000],
        lucky: [88888, 123456, 168168, 222222, 250000, 333333, 555555]
    };

    // T·∫°o ti·ªÅn v√†ng r∆°i
    function createCoins() {
        setInterval(() => {
            const coin = document.createElement('div');
            coin.className = 'coin';
            coin.innerHTML = 'ü™ô';
            coin.style.left = Math.random() * 100 + 'vw';
            coin.style.animationDuration = Math.random() * 3 + 2 + 's';
            coin.style.opacity = Math.random();
            document.body.appendChild(coin);
            setTimeout(() => coin.remove(), 5000);
        }, 300);
    }

    // Logic ·∫©n m·ªánh gi√°
    function getLuckyAmount(mode) {
        let pool = [...config[mode]];
        
        // Filter logic ·∫©n
        if (globalPicks < 5) {
            pool = pool.filter(v => v <= 250000);
        } else if (globalPicks < 30) {
            pool = pool.filter(v => v <= 333333);
        }
        
        // T·ª∑ l·ªá: s·ªë nh·ªè chi·∫øm 70%, s·ªë l·ªõn chi·∫øm 30%
        pool.sort((a,b) => a - b);
        const isBig = Math.random() > 0.7;
        if (isBig && pool.length > 2) {
            return pool[Math.floor(Math.random() * 2) + (pool.length - 2)];
        }
        return pool[Math.floor(Math.random() * (pool.length > 2 ? pool.length - 2 : pool.length))];
    }

    function initGame(mode) {
        const grid = document.getElementById('grid');
        grid.innerHTML = '';
        document.getElementById('gameStatus').innerText = mode === 'takeLuck' ? "üå∏ L√¨ X√¨ L·∫•y May (10-100k)" : "üî• L√¨ X√¨ May M·∫Øn (88-555k)";
        
        for (let i = 0; i < 100; i++) {
            const amt = getLuckyAmount(mode);
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <div class="card-inner">
                    <div class="card-front">üßß</div>
                    <div class="card-back">${amt.toLocaleString()}ƒë</div>
                </div>
            `;
            card.onclick = function() {
                if (!this.classList.contains('flipped')) {
                    this.classList.add('flipped');
                    handleWin(amt);
                }
            };
            grid.appendChild(card);
        }
    }

    function handleWin(amt) {
        globalPicks++;
        globalTotal += amt;
        document.getElementById('picks').innerText = globalPicks;
        document.getElementById('total').innerText = globalTotal.toLocaleString() + 'ƒë';
        
        setTimeout(() => {
            document.getElementById('winAmount').innerText = amt.toLocaleString() + 'ƒë';
            document.getElementById('resultPopup').style.display = 'block';
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 }, colors: ['#ffeb3b', '#ffffff', '#d32f2f'] });
        }, 600);
    }

    function closePopup() { document.getElementById('resultPopup').style.display = 'none'; }

    // Admin Logic
    document.getElementById('horseBtn').onclick = function() {
        clickCount++;
        clearTimeout(clickTimer);
        if (clickCount === 3) {
            document.getElementById('adminModal').style.display = 'block';
            clickCount = 0;
        }
        clickTimer = setTimeout(() => { clickCount = 0; }, 500);
    };

    function verifyPass() {
        if (document.getElementById('adminPass').value === "Test@12345") {
            document.getElementById('adminPassArea').style.display = 'none';
            document.getElementById('adminControls').style.display = 'block';
        } else { alert("Sai m·∫≠t kh·∫©u!"); }
    }

    function saveSettings() {
        const take = document.getElementById('customTakeLuck').value.split(',').map(v => parseInt(v.trim()));
        const lucky = document.getElementById('customLucky').value.split(',').map(v => parseInt(v.trim()));
        config.takeLuck = take;
        config.lucky = lucky;
        document.getElementById('adminModal').style.display = 'none';
        alert("ƒê√£ l∆∞u c·∫•u h√¨nh m·ªõi!");
    }

    window.onclick = function(event) {
        if (event.target == document.getElementById('adminModal')) {
            document.getElementById('adminModal').style.display = 'none';
        }
    };

    window.onload = () => {
        createCoins();
        initGame('takeLuck');
    };
</script>
</body>
</html>
